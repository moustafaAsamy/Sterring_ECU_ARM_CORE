/*
 * application.c
 *
 *  Created on: Jun 23, 2021
 *      Author: Lenovo PC
 */




void UDP_recv_steering_set_point(void *arg, struct udp_pcb *pcb, struct pbuf *p,ip_addr_t *addr, u16_t port)
{
    led_off();
    led_on(blue);
    memcpy( set__point  , (u8_t *)p->payload ,   p->len);
    pbuf_free(p);                                       // Free the memory space allocated for this receive.
    p =NULL;                                            // to avoid dangling pointer
    connection_established =1;
}


void send_udp_steering_encoder_reading(const uint16_t* data, int length)
{
         struct pbuf *p;
         if (   (p= pbuf_alloc(PBUF_udp, length,PBUF_RAM) )== NULL) { return ERR_MEM;}  /* not enough space */           // Length of data only and payload point to the start of data
         memcpy(p->payload,(u8_t*)data ,length);
         err_t n= udp_send(Udp_ptr_steering_encoder_reading, p);
         pbuf_free(p);
}



